// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Microorganismos {
  id               Int               @id @default(autoincrement())
  nome             String            @db.VarChar(100)
  descricao        String?           @db.Text
  ativo            Boolean
  data_cadastro    DateTime
  data_desativacao DateTime?
  limites_contagem LimitesContagem[]
}

model PontosAvaliados {
  id               Int               @id @default(autoincrement())
  sala             String            @db.VarChar(100)
  area             String            @db.VarChar(100)
  local_processo   String?           @db.VarChar(100)
  metodo           String?           @db.Text
  frequencia       Frequencia
  zona_proximidade ZonaProximidade
  zona_higienico   ZonaHigienico
  ativo            Boolean
  data_cadastro    DateTime
  data_desativacao DateTime?
  limites_contagem LimitesContagem[]
}

model LimitesContagem {
  id                  Int             @id @default(autoincrement())
  limites_contagem    String          @db.VarChar(45)
  pontos_avaliados    PontosAvaliados @relation(fields: [pontos_avaliados_id], references: [id])
  pontos_avaliados_id Int
  microorganismos     Microorganismos @relation(fields: [microorganismos_id], references: [id])
  microorganismos_id  Int
  resultados          Resultados[]
}

model Resultados {
  idresultados        Int             @id @default(autoincrement())
  resultado_coleta    Float
  acao_corretiva      String?         @db.Text
  data_cadastro       DateTime
  limites_contagem    LimitesContagem @relation(fields: [limites_contagem_id], references: [id])
  limites_contagem_id Int
}

enum Frequencia {
  SEMANAL
  QUINZENAL
  MENSAL
}

enum ZonaProximidade {
  ZONA_1
  ZONA_2
  ZONA_3
  ZONA_4
}

enum ZonaHigienico {
  ALTO_RISCO
  MEDIO_RISCO
  BAIXO_RISCO
}